@if(isAdmin()){
<button
  class="add-button"
  (click)="navigateToAddProduct()"
  aria-label="Add a new product"
>
  Adaugă produs
</button>
}
<div class="page" role="main">
  <div class="path-display" aria-label="Breadcrumb navigation">
    <a
      routerLink="/"
      routerLinkActive="active-link"
      [routerLinkActiveOptions]="{ exact: true }"
      aria-label="Go to homepage"
    >
      Start
    </a>
    <span aria-hidden="true"> > </span>
    <span>
      {{ title }}
    </span>
  </div>
  <div class="container-header">
    <p class="title left-header" aria-label="Page title">
      {{ title }}
    </p>
    <div class="right-header">
      <div class="search-container" aria-label="Search products">
        <svg
          class="search-icon"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 24 24"
          stroke="currentColor"
          fill="none"
          aria-hidden="true"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M21 21l-4.35-4.35m1.35-5.65a7 7 0 11-14 0 7 7 0 0114 0z"
          />
        </svg>
        <input
          type="text"
          placeholder="Search..."
          class="search-input"
          [(ngModel)]="searchQuery"
          (input)="onSearchChange()"
          aria-label="Search input"
        />
      </div>
      <div class="sort-dropdown" aria-label="Sort products">
        <label for="sort">Sortează după:</label>
        <select
          id="sort"
          [(ngModel)]="selectedSort"
          (change)="onSortChange($event)"
          aria-label="Sort options"
        >
          <option *ngFor="let option of sortOptions" [ngValue]="option">
            {{ option.label }}
          </option>
        </select>
      </div>
    </div>
  </div>
  <div class="container">
    <div class="left" aria-label="Product categories">
      @for (category of product_categories; track $index) {
      <a
        [routerLink]="category.link"
        routerLinkActive="active-link"
        [routerLinkActiveOptions]="{ exact: true }"
        class="category-item"
        [attr.aria-label]="'Category: ' + category.name"
      >
        <div class="category-text">
          {{ category.name }}
        </div>
      </a>
      }
    </div>
    <div class="right">
      @if(isLoading){
      <app-loading-spinner aria-label="Loading products"></app-loading-spinner>
      }@else{
      <div class="product-list" aria-label="Product list">
        <div class="product-grid">
          @for (product of currentProducts; track $index) {
          <div>
            @if (product) {
            <div
              (click)="navigateToProductDetails(product)"
              class="product-card"
              [attr.aria-label]="'View details for ' + product.name"
            >
              <img
                [src]="product.mainImage"
                [alt]="product.name"
                class="product-image"
              />
              <div class="product-details">
                <h3 class="product-title">{{ product.name }}</h3>
                @if(product.status === "sold"){
                <p class="sold">SOLD</p>
                }@else {
                <p class="product-price">{{ product.totalPrice }}&#8364;</p>
                }
              </div>
            </div>
            }
          </div>
          }
        </div>

        <!-- Pagination -->
        <div class="pagination" aria-label="Pagination controls">
          <button
            class="pagination-btn"
            (click)="goToPreviousPage()"
            [disabled]="currentPage === 1"
            aria-label="Go to previous page"
          >
            Previous
          </button>

          <span class="pagination-info"
            >Page {{ currentPage }} of {{ totalPages }}</span
          >

          <button
            class="pagination-btn"
            (click)="goToNextPage()"
            [disabled]="currentPage === totalPages"
            aria-label="Go to next page"
          >
            Next
          </button>
        </div>
      </div>
      }
    </div>
  </div>
</div>
